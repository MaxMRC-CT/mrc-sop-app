{% extends "base.html" %}
{% block content %}
<div class="flex flex-col gap-6">
  <div class="bg-[#2f3640] border border-white/10 rounded-2xl p-5 sm:p-6">
    <h1 class="text-2xl font-semibold">{{ module.title }}</h1>
    <p class="text-sm text-white/60">Linked SOP: <a class="text-orange-300 hover:underline" href="/sop/{{ module.sop_id }}">View SOP</a></p>
  </div>

  {% if locked %}
  <div class="bg-[#2f3640] border border-white/10 rounded-2xl p-5 sm:p-6 text-sm text-white/70">
    You have reached the maximum number of attempts ({{ max_attempts }}) in the last {{ lockout_hours }} hours.
    Please try again later.
  </div>
  {% elif question %}
  <form method="post" class="bg-[#2f3640] border border-white/10 rounded-2xl p-5 sm:p-6 flex flex-col gap-4">
    <div class="text-sm text-white/60">Passing score: {{ module.passing_score }}%</div>
    <div class="font-semibold">{{ question.question_text }}</div>
    <label class="flex items-center gap-2">
      <input type="radio" name="answer" value="A" required />
      <span>{{ question.option_a }}</span>
    </label>
    <label class="flex items-center gap-2">
      <input type="radio" name="answer" value="B" required />
      <span>{{ question.option_b }}</span>
    </label>
    <label class="flex items-center gap-2">
      <input type="radio" name="answer" value="C" required />
      <span>{{ question.option_c }}</span>
    </label>
    <label class="flex items-center gap-2">
      <input type="radio" name="answer" value="D" required />
      <span>{{ question.option_d }}</span>
    </label>
    <button class="mrc-gradient text-black rounded-lg px-4 py-2 font-semibold w-fit">Submit Quiz</button>
  </form>
  {% else %}
  <div class="bg-[#2f3640] border border-white/10 rounded-2xl p-5 sm:p-6 text-sm text-white/60">
    No quiz question has been configured yet. Please contact an admin.
  </div>
  {% endif %}
</div>
{% endblock %}
