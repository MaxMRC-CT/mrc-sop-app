{% extends "base.html" %}
{% block content %}
<div class="flex flex-col gap-6">
  <section class="bg-[#2f3640] border border-white/10 rounded-2xl p-5 sm:p-6">
    <h1 class="text-2xl font-semibold mb-1">{{ sop.title }}</h1>
    <div class="text-sm text-white/60 mb-4">Category: {{ sop.category }}</div>
    <div class="prose max-w-none text-white/90 whitespace-pre-wrap">{{ sop.content }}</div>
  </section>

  <section class="bg-[#2f3640] border border-white/10 rounded-2xl p-5 sm:p-6">
    <h2 class="text-xl font-semibold mb-4">Staff Acknowledged Reading</h2>
    <form method="post" action="/sop/{{ sop.id }}/ack" class="flex flex-col gap-3">
      <label class="text-sm font-semibold">Staff Name
        <input type="text" name="staff_name" required class="mt-1 w-full bg-transparent border border-white/10 rounded-lg px-3 py-2" />
      </label>
      <label class="inline-flex items-center gap-2 text-sm text-white/80">
        <input type="checkbox" required class="h-4 w-4" />
        I acknowledge that I have read and understand this SOP.
      </label>
      <button class="mrc-gradient text-black rounded-lg px-4 py-2 font-semibold w-fit">Submit</button>
    </form>

    <div class="mt-6">
      <h3 class="text-lg font-semibold mb-2">Recent Acknowledgments</h3>
      {% if acknowledgments|length == 0 %}
        <p class="text-sm text-white/60">No acknowledgments yet.</p>
      {% else %}
        <ul class="text-sm">
          {% for ack in acknowledgments %}
            <li class="border-b border-white/10 py-2">{{ ack.staff_name }} â€” {{ ack.acknowledged_at }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>
  </section>
</div>
{% endblock %}
